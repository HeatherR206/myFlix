<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>&#x1f39e;&#xfe0f; myFlix API DOCUMENTATION</title>
    <style>
      /* From extension vscode.github */
      /*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

      .vscode-dark img[src$='\#gh-light-mode-only'],
      .vscode-light img[src$='\#gh-dark-mode-only'],
      .vscode-high-contrast:not(.vscode-high-contrast-light)
        img[src$='\#gh-light-mode-only'],
      .vscode-high-contrast-light img[src$='\#gh-dark-mode-only'] {
        display: none;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css"
    />
    <style>
      body {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui,
          'Ubuntu', 'Droid Sans', sans-serif;
        font-size: 14px;
        line-height: 1.6;
      }
    </style>
    <style>
      .task-list-item {
        list-style-type: none;
      }

      .task-list-item-checkbox {
        margin-left: -20px;
        vertical-align: middle;
        pointer-events: none;
      }
    </style>
    <style>
      :root {
        --color-note: #0969da;
        --color-tip: #1a7f37;
        --color-warning: #9a6700;
        --color-severe: #bc4c00;
        --color-caution: #d1242f;
        --color-important: #8250df;
      }
    </style>
    <style>
      @media (prefers-color-scheme: dark) {
        :root {
          --color-note: #2f81f7;
          --color-tip: #3fb950;
          --color-warning: #d29922;
          --color-severe: #db6d28;
          --color-caution: #f85149;
          --color-important: #a371f7;
        }
      }
    </style>
    <style>
      .markdown-alert {
        padding: 0.5rem 1rem;
        margin-bottom: 16px;
        color: inherit;
        border-left: 0.25em solid #888;
      }

      .markdown-alert > :first-child {
        margin-top: 0;
      }

      .markdown-alert > :last-child {
        margin-bottom: 0;
      }

      .markdown-alert .markdown-alert-title {
        display: flex;
        font-weight: 500;
        align-items: center;
        line-height: 1;
      }

      .markdown-alert .markdown-alert-title .octicon {
        margin-right: 0.5rem;
        display: inline-block;
        overflow: visible !important;
        vertical-align: text-bottom;
        fill: currentColor;
      }

      .markdown-alert.markdown-alert-note {
        border-left-color: var(--color-note);
      }

      .markdown-alert.markdown-alert-note .markdown-alert-title {
        color: var(--color-note);
      }

      .markdown-alert.markdown-alert-important {
        border-left-color: var(--color-important);
      }

      .markdown-alert.markdown-alert-important .markdown-alert-title {
        color: var(--color-important);
      }

      .markdown-alert.markdown-alert-warning {
        border-left-color: var(--color-warning);
      }

      .markdown-alert.markdown-alert-warning .markdown-alert-title {
        color: var(--color-warning);
      }

      .markdown-alert.markdown-alert-tip {
        border-left-color: var(--color-tip);
      }

      .markdown-alert.markdown-alert-tip .markdown-alert-title {
        color: var(--color-tip);
      }

      .markdown-alert.markdown-alert-caution {
        border-left-color: var(--color-caution);
      }

      .markdown-alert.markdown-alert-caution .markdown-alert-title {
        color: var(--color-caution);
      }
    </style>
  </head>
  <body class="vscode-body vscode-light">
    <!-- API Documentation -->
    <h1 id="Ô∏è--myflix-api-documentation">üéûÔ∏è myFlix API DOCUMENTATION</h1>
    <p>
      A web service for human users to search for and save information about
      movies.
    </p>
    <br />
    <h2 id="-overview--architecture">
      üåà <strong>OVERVIEW &amp; ARCHITECTURE</strong>
    </h2>
    <hr />
    <p>
      The myFlix API is a
      <a href="https://restfulapi.net/"><strong>RESTful API</strong></a> built
      with <strong>JavaScript/Node.js</strong> and the Express framework. It
      uses standard <strong>HTTP methods</strong> (<code>GET</code>,
      <code>POST</code>, <code>PUT</code>, and <code>DELETE</code>) to perform
      <strong>CRUD</strong> (<code>Create</code>, <code>Read</code>,
      <code>Update</code>, and <code>Delete</code>) operations on the available
      resources (endpoints) and returns a <strong>JSON</strong> response to the
      client.
    </p>
    <p>
      Unlike &quot;in-memory&quot; data storage, which is temporary, this API
      uses <strong>MongoDB Community Server</strong> as its persistent
      <strong>NoSQL database</strong>. <strong>Mongoose</strong>, an
      <strong>Object Data Modeling (ODM)</strong> library, is used to interact
      with MongoDB, providing a structured, schema-based solution to model the
      application data.
    </p>
    <br />
    <h2 id="-getting-started">üé¨ <strong>GETTING STARTED</strong></h2>
    <hr />
    <p>
      The myFlix API runs best within a
      <strong>Node.js runtime environment</strong>.
    </p>
    <br />
    <h3 id="-base-url-development">
      üîó <strong>Base URL (Development)</strong>
    </h3>
    <p>
      The root URL for all API endpoints is:
      <code>http://localhost:8080/movies</code>
    </p>
    <br />
    <h3 id="-database-setup-using-mongodb">
      üìÄ <strong>Database Setup using MongoDB</strong>
    </h3>
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.15em"
            >Installing MongoDB Community Server</span
          ></strong
        >
        <p>
          You will need to install and run the
          <strong>MongoDB Community Server</strong> locally (e.g., your system
          Terminal). This service manages your database and makes it available
          for a connection with myFlix API.
        </p>
      </summary>
      <br />
      <ol>
        <li>
          <strong>Installation:</strong> Download and install the
          <strong>MongoDB Community Server</strong> for your operating system
          from the official MongoDB website.
        </li>
      </ol>
      <br />
      <blockquote>
        <p>
          ‚≠êÔ∏è <strong>TIP!</strong> The installation process typically registers
          the MongoDB server as a <strong>system service</strong> (e.g.,
          <code>mongod</code> on Linux/macOS or a service on Windows) that
          automatically starts upon boot, but you may need to start it manually.
        </p>
      </blockquote>
      <br />
      <ol start="2">
        <li>
          <p>
            <strong>Running the Service:</strong> Ensure the MongoDB service is
            running. If you used Homebrew for MongoDB installation, you can use
            the following Terminal commands:
          </p>
          <p><strong>Start MongoDB</strong>:</p>
          <pre><code>brew services start mongodb-community
</code></pre>
          <p><strong>Check MongoDB status</strong>:</p>
          <pre><code>brew services list 
</code></pre>
          <p><strong>Stop MongoDB</strong>:</p>
          <pre><code>brew services stop mongoDB-community
</code></pre>
          <p>The default connection port is <code>**27017**</code>.</p>
        </li>
      </ol>
      <br />
      <ol start="3">
        <li>
          <strong>Database Connection:</strong> The API will attempt to connect
          to the database instance and automatically create the myFlixDB (or
          similar) database on the first successful connection and data
          insertion.
        </li>
      </ol>
      <br />
      <hr />
    </details>
    <br />
    <h3 id="-node-packages--dependencies">
      üì¶ <strong>Node Packages &amp; Dependencies</strong>
    </h3>
    <p>
      myFlix API executes with the following <strong>Node dependencies</strong>:
    </p>
    <br />
    <table>
      <thead>
        <tr>
          <th>Package</th>
          <th>Purpose</th>
          <th>Explanation</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Express</strong></td>
          <td>Minimalist web framework for Node.js</td>
          <td>Routing and Middleware</td>
        </tr>
        <tr>
          <td><strong>Morgan</strong></td>
          <td>Logs HTTP requests to the console</td>
          <td>Logging Middleware</td>
        </tr>
        <tr>
          <td><strong>Mongoose</strong></td>
          <td>
            Provides structure (schemas) and tools for MongoDB interaction
          </td>
          <td>Object Data Modeling (ODM)</td>
        </tr>
        <tr>
          <td><strong>Body-Parser</strong> (optional)</td>
          <td>
            Parses incoming request bodies in a middleware before your handlers
          </td>
          <td>Parsing Middleware</td>
        </tr>
        <tr>
          <td><br /></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
    </table>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.2em"
            >Installing Node Packages</span
          ></strong
        >
      </summary>
      <br />
      <p>
        You may find it helpful to read up on
        <a href="https://www.npmjs.com/"><strong>npm</strong></a
        >, Node's default package manager. You will use your system
        <strong>CLI</strong> (Command Line Interface) or
        <strong>IDE</strong> Terminal for Node package installations.
      </p>
      <br />
      <blockquote>
        <p>
          ‚≠êÔ∏è <strong>Tip:</strong> Using your IDE's Terminal to install Node
          dependencies may be more convenient and efficient!
        </p>
      </blockquote>

      <br />
      <ol>
        <li>
          <p>
            <strong>Initialize Project</strong>, if you haven't yet done so:
          </p>
          <pre><code>npm init -y 
</code></pre>
        </li>
      </ol>
      <br />
      <ol start="2">
        <li>
          <p>
            <strong>Install Dependencies</strong>: Navigate to your
            <strong>project's root directory</strong>.
          </p>
          <pre><code>npm install --save express mongoose morgan body-parser
</code></pre>
        </li>
      </ol>
      <br />
      <ol start="3">
        <li>
          <p>
            <strong>(Optional) Verification</strong>: Check your
            <code>package.json</code> file for the installed packages under the
            <code>&quot;dependencies&quot;</code> property.
          </p>
          <pre><code>cat package.json
</code></pre>
          <pre><code class="language-json">
<span class="hljs-attr">&quot;dependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;express&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^5.1.0&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;mongoose&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^8.19.3&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;morgan&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^1.10.1&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;body-parser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.2.0&quot;</span><span class="hljs-punctuation">,</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>

</code></pre>
        </li>
      </ol>
      <br />
      <hr />
    </details>
    <br />
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.2em"
            >Importing Node Dependencies to App</span
          ></strong
        >
        <br />
        <p>
          To build this Node.js application, you'll use the built-in
          <code>require()</code> function (ES6 <code>import</code> syntax) to
          load modules into the app's memory. This process is called
          <strong>importing dependencies</strong> (or <strong>modules</strong>).
        </p>
      </summary>
      <p>
        In your main application file (e.g., <code>index.js</code> or
        <code>server.js</code>), you should place all intialization
        <code>require()</code> statements at the very top.
      </p>
      <br />
      <p><strong>Example: Initialization Statements</strong></p>
      <pre><code class="language-js">
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>), <span class="hljs-comment">// Provides an absolute path to the public directory for client requests</span>
    express = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;express&#x27;</span>),
    morgan = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;morgan&#x27;</span>),
    mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>), <span class="hljs-comment">// For connecting to MongoDB and defining schemas</span>
    bodyParser = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;body-parser&#x27;</span>);

<span class="hljs-comment">// Initialize the Express application</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();

<span class="hljs-comment">// Reference the Mongoose models</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Movies</span> = models.<span class="hljs-property">Movie</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Users</span> = models.<span class="hljs-property">User</span>;

<span class="hljs-comment">// ... Mongoose connection code follows here</span>

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.2em"
            >Express Middleware Execution Structure</span
          ></strong
        >
        <br />
        <p>
          <strong>Middleware</strong> are functions that Express executes
          sequentially when a request is made to the server. They have access to
          the request (<code>req</code>), the response (<code>res</code>), and
          the next middleware function in the stack (<code>next</code>).
        </p>
        <p>
          Proper ordering of the <strong>Middleware Stack</strong> is crucial
          because each function processes the request before passing it on.
        </p>
      </summary>
      <br />
      <p>
        <strong
          >Express middleware should be ordered as follows for server-side
          execution:</strong
        >
      </p>
      <table>
        <thead>
          <tr>
            <th>Step</th>
            <th>Middleware/Purpose</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>1</strong></td>
            <td><strong>Logging</strong> (<code>morgan</code>)</td>
            <td>Logs the request details immediately upon receipt</td>
          </tr>
          <tr>
            <td><strong>2</strong></td>
            <td><strong>Static Files</strong> (<code>express.static</code>)</td>
            <td>
              <strong>Crucial</strong>: Checks for static assets (HTML, CSS,
              images). If found, the request is served and process ends
            </td>
          </tr>
          <tr>
            <td><strong>3</strong></td>
            <td>
              <strong>Body Parsing</strong> (<code>express.json()</code>,
              <code>express.urlencoded()</code>)
            </td>
            <td>
              Processes request bodies (e.g., JSON from a
              <code>POST</code> request) so route handlers can read
              <code>req.body</code>
            </td>
          </tr>
          <tr>
            <td><strong>4</strong></td>
            <td><strong>Authentification/Session</strong> (if applicable)</td>
          </tr>
          <tr>
            <td><strong>5</strong></td>
            <td>
              <strong>Route Handlers</strong> (<code>app.get</code>,
              <code>app.post</code>, etc.)
            </td>
            <td>
              Specific functions executing the business logic (e.g., querying
              the database)
            </td>
          </tr>
          <tr>
            <td><strong>6</strong></td>
            <td>
              <strong>Error-Handling Middleware</strong> (<code
                >app.use((err, req, res, next)</code
              >)
            </td>
            <td>
              A special function defined with four arguments to catch final
              errors in application
            </td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        At the end of the <strong>Middleware Stack</strong> is the
        <strong>Server Startup</strong> (<code>app.listen()</code>), an Express
        method that starts the <strong>HTTP server</strong>.
      </p>
      <br />
      <p><strong>Example: Middleware Stack</strong></p>
      <pre><code class="language-js">
<span class="hljs-comment">// ... initialization statements</span>

<span class="hljs-comment">// 1. Logging</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">morgan</span>(<span class="hljs-string">&#x27;common&#x27;</span>)); 

<span class="hljs-number">1.</span> <span class="hljs-title class_">Static</span> files (uses path.<span class="hljs-property">join</span> <span class="hljs-keyword">for</span> reliability)        
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">static</span>(path.<span class="hljs-title function_">join</span>(__dir<span class="hljs-string">&quot;public&quot;</span>))); <span class="hljs-comment">// </span>

<span class="hljs-comment">// 3. JSON body parsing</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());           
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">urlencoded</span>({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> })); 

<span class="hljs-comment">// ... Authentification middleware might go here</span>

<span class="hljs-comment">// ... Route handlers follow here</span>

<span class="hljs-comment">// Error-Handling Middleware</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">err, req, res, next</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err.<span class="hljs-property">stack</span>);
  res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&quot;Something broke!&quot;</span>);
});

<span class="hljs-comment">// Server/Port Listener</span>
<span class="hljs-keyword">const</span> port = <span class="hljs-number">8080</span>;

app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">8080</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`myFlix app is listening at http://localhost:<span class="hljs-subst">${port}</span>`</span>);
});

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <br />
    <h2 id="-mongoose-data-modeling-schema">
      ü™ú <strong>MONGOOSE DATA MODELING SCHEMA</strong>
    </h2>
    <hr />
    <p>
      The API's data structure is defined by <strong>Mongoose Schemas</strong>.
      These schemas enforce the structure and validation rules for documents
      stored in your MongoDB <strong>collections</strong> (the NoSQL equivalent
      of tables). The schema defines the <strong>fields</strong>, their
      <strong>data types</strong>, and any validation/default rules.
    </p>
    <br />
    <h3 id="Ô∏è-mongoose-connection-code">
      üñáÔ∏è <strong>Mongoose Connection Code</strong>
    </h3>
    <p>
      Before defining your application <strong>routes</strong>, you must connect
      to the MongoDB server on the default port 27017, using Mongoose:
    </p>
    <br />
    <pre><code class="language-js">
    mongoose.<span class="hljs-title function_">connect</span>(<span class="hljs-string">&#x27;mongodb://localhost:27017/myFlixDB&#x27;</span>, {
        <span class="hljs-attr">useNewURLParser</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">useUnifiedTopology</span>: <span class="hljs-literal">true</span>
    });

</code></pre>
    <br />
    <h3 id="-mongoose-schema">ü™ú <strong>Mongoose Schema</strong></h3>
    <p>
      The following <strong>JavaScript</strong> codeblocks show the
      <strong>Mongoose Schemas</strong> for both the <code>Movie</code> and
      <code>User</code> resources. These schemas collectively define the
      required structure and validation rules for Movie documents in the
      <code>movies</code> collection and User documents in the
      <code>users</code> collection.
    </p>
    <br />
    <blockquote>
      <p>
        ‚ö†Ô∏è <strong>CAVEAT</strong> Modifying these schemas may cause database
        requests and validation checks to fail without proper code refactoring.
      </p>
    </blockquote>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.1em"
            >Initialization, Embedded Sub-Schemas</span
          ></strong
        >
      </summary>
      <br />
      <p><strong>Example: Sub-Schemas (Genre, Actor, Director)</strong></p>
      <pre><code class="language-js">
<span class="hljs-comment">// Initialization statements</span>
<span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>);
<span class="hljs-keyword">const</span> bcrypt = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;bcrypt&#x27;</span>); <span class="hljs-comment">// to hash passwords</span>
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Schema</span> } = mongoose;

<span class="hljs-comment">// Referencing genreSchema allows for a movie to have multiple Genres that each contain nested properties</span>
<span class="hljs-keyword">const</span> genreSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
    <span class="hljs-attr">genreName</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">genreDescription</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
    }
}, { <span class="hljs-attr">_id</span>: <span class="hljs-literal">false</span> });

<span class="hljs-comment">// Referencing actorSchema allows for a movie to have multiple Actors that each contain nested properties</span>
<span class="hljs-keyword">const</span> actorSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
    <span class="hljs-attr">actorName</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">actorBio</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>
    },
    <span class="hljs-attr">birthDate</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">validate</span>: {
            <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) {
                <span class="hljs-keyword">const</span> yearOnly = <span class="hljs-regexp">/^\d{4}$/</span>.<span class="hljs-title function_">test</span>(v);
                <span class="hljs-keyword">const</span> fullDate = <span class="hljs-regexp">/^\d{4}-\d{2}-\d{2}$/</span>.<span class="hljs-title function_">test</span>(v);
                
                <span class="hljs-keyword">return</span> yearOnly || (fullDate &amp;&amp; !<span class="hljs-built_in">isNaN</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(v))); 
            },
            <span class="hljs-attr">message</span>: <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${props.value}</span> must be in YYYY or YYYY-MM-DD format.`</span>
        },
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">deathDate</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Date</span>,
        <span class="hljs-attr">validate</span>: {
            <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>){
                <span class="hljs-keyword">if</span> (!v) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">const</span> birthDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">birthDate</span>);

                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(birthDate.<span class="hljs-title function_">valueOf</span>())) { 
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">return</span> v &gt;= birthDate;
            }                  
        },
            <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Death date must be after the birth date.&#x27;</span>   
    },
}, { <span class="hljs-attr">_id</span>: <span class="hljs-literal">false</span> });

<span class="hljs-comment">// Referencing directorSchema allows for a movie to have multiple Directors that each contain nested properties</span>
<span class="hljs-keyword">const</span> directorSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
    <span class="hljs-attr">directorName</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">bio</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>
    },
    <span class="hljs-attr">birthDate</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">validate</span>: {
            <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) { 
                <span class="hljs-keyword">const</span> yearOnly = <span class="hljs-regexp">/^\d{4}$/</span>.<span class="hljs-title function_">test</span>(v);
                <span class="hljs-keyword">const</span> fullDate = <span class="hljs-regexp">/^\d{4}-\d{2}-\d{2}$/</span>.<span class="hljs-title function_">test</span>(v);
                
                <span class="hljs-keyword">return</span> yearOnly || (fullDate &amp;&amp; !<span class="hljs-built_in">isNaN</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(v))); 
            },
            <span class="hljs-attr">message</span>: <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${props.value}</span> must be in YYYY or YYYY-MM-DD format.`</span>
        },
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">deathDate</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Date</span>,
        <span class="hljs-attr">validate</span>: {
            <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>){
                <span class="hljs-keyword">if</span> (!v) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">const</span> birthDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">birthDate</span>);

                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(birthDate.<span class="hljs-title function_">valueOf</span>())) { 
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">return</span> v &gt;= birthDate;  
            },
            <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Death date must be after the birth date.&#x27;</span>
        }  
    },
}, { <span class="hljs-attr">_id</span>: <span class="hljs-literal">false</span> });

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.1em">Mongoose Movie Schema</span></strong
        >
      </summary>
      <br />
      <p><strong>Example: Movie Schema</strong></p>
      <pre><code class="language-js">
<span class="hljs-comment">// Embedded movie schema with references to schema for Genres, Actors, and Directors</span>
<span class="hljs-keyword">const</span> movieSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
    <span class="hljs-attr">title</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">trim</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">summary</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">genres</span>: {
        <span class="hljs-attr">type</span>: [genreSchema],
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">validate</span>: {
            <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) {
                <span class="hljs-keyword">return</span> v &amp;&amp; v.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>;
            },
            <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;A Movie must have at least one Genre.&#x27;</span>
        }
    },
    <span class="hljs-attr">cast</span>: {
        <span class="hljs-attr">type</span>: [castSchema],
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">validate</span>: {
            <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) {
                <span class="hljs-keyword">return</span> v &amp;&amp; v.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>;
            },
            <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;A Movie must have at least one Actor.&#x27;</span>
        }
    },
    <span class="hljs-attr">directors</span>: {
        <span class="hljs-attr">type</span>: [directorSchema],
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">validate</span>: {
            <span class="hljs-attr">validator</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) {
                <span class="hljs-keyword">return</span> v &amp;&amp; v.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>;
            },
            <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;A Movie must have at least one Director.&#x27;</span>
        }
    },   
    <span class="hljs-attr">releaseDate</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Date</span>
    },
    <span class="hljs-attr">imagePath</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>
    },
    <span class="hljs-attr">featured</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Boolean</span>
    }
});

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.1em">Mongoose User Schema</span></strong
        >
      </summary>
      <br />
      <p><strong>Example: User Schema</strong></p>
      <pre><code class="language-js">
<span class="hljs-comment">// Mongoose userSchema</span>
<span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Schema</span>({
    <span class="hljs-attr">username</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">minlength</span>: <span class="hljs-number">6</span>,
        <span class="hljs-attr">trim</span>: <span class="hljs-literal">true</span>,
    },
    <span class="hljs-attr">email</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">unique</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">trim</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">lowercase</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">validate</span>: {
            <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-regexp">/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/</span>.<span class="hljs-title function_">test</span>(v);
            },
            <span class="hljs-attr">message</span>: <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${props.value}</span> is not a valid email address.`</span>
        }
    },
    <span class="hljs-attr">password</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">minlength</span>: <span class="hljs-number">10</span>
    },
    <span class="hljs-attr">firstName</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>
    },
    <span class="hljs-attr">lastName</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>
    },
    
    <span class="hljs-attr">birthDate</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Date</span>,
    },

    <span class="hljs-attr">favoriteMovies</span>: {
        <span class="hljs-attr">type</span>: [{
            <span class="hljs-attr">type</span>: mongoose.<span class="hljs-property">Schema</span>.<span class="hljs-property">Types</span>.<span class="hljs-property">ObjectId</span>,
            <span class="hljs-attr">ref</span>: <span class="hljs-string">&#x27;Movie&#x27;</span>
        }],
        <span class="hljs-attr">default</span>: []
    }
});

<span class="hljs-comment">// Security measure to hash password plain text</span>
userSchema.<span class="hljs-title function_">pre</span>(<span class="hljs-string">&#x27;save&#x27;</span>, <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) {
    <span class="hljs-keyword">const</span> user = <span class="hljs-variable language_">this</span>;
    <span class="hljs-keyword">if</span> (user.<span class="hljs-title function_">isModified</span>(<span class="hljs-string">&#x27;password&#x27;</span>)) {
        <span class="hljs-keyword">const</span> salt = <span class="hljs-keyword">await</span> bcryptjs.<span class="hljs-title function_">genSalt</span>(<span class="hljs-number">10</span>);
        user.<span class="hljs-property">password</span> = <span class="hljs-keyword">await</span> bcryptjs.<span class="hljs-title function_">hash</span>(user.<span class="hljs-property">password</span>, salt);    
    }
    <span class="hljs-title function_">next</span>();
});

userSchema.<span class="hljs-property">methods</span>.<span class="hljs-property">comparePassword</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">candidatePassword</span>) {
    <span class="hljs-keyword">return</span> bcryptjs.<span class="hljs-title function_">compare</span>(candidatePassword, <span class="hljs-variable language_">this</span>.<span class="hljs-property">password</span>);
};

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong><span style="font-size: 1.1em">Mongoose Models</span></strong>
      </summary>
      <br />
      <p><strong>Example: Mongoose Models</strong></p>
      <pre><code class="language-js">
<span class="hljs-comment">// Create Mongoose Models from Schemas</span>
<span class="hljs-keyword">let</span> <span class="hljs-title class_">Movie</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;Movie&#x27;</span>, movieSchema); 
<span class="hljs-keyword">let</span> <span class="hljs-title class_">User</span> = mongoose.<span class="hljs-title function_">model</span>(<span class="hljs-string">&#x27;User&#x27;</span>, userSchema);

<span class="hljs-comment">// Export Mongoose Models to use in API route handlers</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span>.<span class="hljs-property">Movie</span> = <span class="hljs-title class_">Movie</span>;
<span class="hljs-variable language_">module</span>. <span class="hljs-built_in">exports</span>.<span class="hljs-property">User</span> = <span class="hljs-title class_">User</span>;

</code></pre>
    </details>
    <br />
    <br />
    <h2 id="-api-testing-tools">‚úÖ <strong>API TESTING TOOLS</strong></h2>
    <hr />
    <p>
      Testing your URL endpoints is critical to developing a quality API. You
      will need an <strong>HTTP Client Tool</strong> to test your requests
      (e.g.,
      <a href="https://www.thunderclient.com/"
        ><strong>Thunder Client</strong></a
      >, <a href="https://curl.se/docs/manpage.html"><strong>cURL</strong></a
      >,
      <a href="https://smartbear.com/product/ready-api/"
        ><strong>ReadyAPI</strong></a
      >, <a href="https://www.postman.com/"><strong>Postman</strong></a
      >).
    </p>
    <p>These tools are necessary for:</p>
    <ul>
      <li>
        sending <strong>HTTP requests</strong> (<code>GET</code>,
        <code>POST</code>, <code>PUT</code>, and <code>DELETE</code>) to your
        endpoints;
      </li>
      <li>
        formatting <strong>request bodies</strong> (especially for
        <code>POST</code> and <code>PUT</code> requests) as
        <strong>JSON</strong> data, which is essential for sending new or
        updated data to the server.
      </li>
    </ul>
    <br />
    <h2 id="-http-requests-with-mongoosemongodb">
      üí° <strong>HTTP REQUESTS WITH MONGOOSE/MONGODB</strong>
    </h2>
    <hr />
    <p>
      The myFlix API uses <strong>RESTful endpoints</strong> to provide movie
      data access. <strong>HTTP methods</strong> (<strong>GET</strong>,
      <strong>POST</strong>, <strong>PUT</strong>, <strong>DELETE</strong>)
      direct client requests to the corresponding back-end function, which
      executes a <strong>CRUD</strong> (<strong>Create</strong>,
      <strong>Read</strong>, <strong>Update</strong>, <strong>Delete</strong>)
      operation on the database using <strong>Mongoose Models</strong> (<code
        >User</code
      >
      and <code>Movie</code>). All request handling follows
      <strong>Express</strong> routing syntax:
      <code>app.METHOD(PATH, HANDLER)</code>.
    </p>
    <p>
      <strong>Example</strong>:
      <code>app.get('/movies', async (req, res) =&gt; { ... });</code>
    </p>
    <br />
    <table>
      <thead>
        <tr>
          <th>HTTP Request</th>
          <th>CRUD Operation</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>POST</code></td>
          <td>CREATE</td>
        </tr>
        <tr>
          <td><code>GET</code></td>
          <td>READ</td>
        </tr>
        <tr>
          <td><code>PUT</code> or <code>PATCH</code></td>
          <td>UPDATE</td>
        </tr>
        <tr>
          <td><code>DELETE</code></td>
          <td>DELETE</td>
        </tr>
        <tr>
          <td><br /></td>
          <td></td>
        </tr>
      </tbody>
    </table>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code>POST : Add a new User</code></span
          ></strong
        >
        <p>
          This endpoint registers a new User with their information to the
          database. <br />
        </p>
        <p>
          <strong>Endpoint:</strong> <code>/users</code><br />
          <strong>CRUD Operation:</strong> CREATE<br />
          <strong>Authentification:</strong> Required
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        This defines what the client sends and the rules for each field.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>username</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>Unique; minimum length: 6 characters</td>
            <td><code>&quot;Jane_Doe525&quot;</code></td>
          </tr>
          <tr>
            <td><strong>email</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>Unique; must be valid email format</td>
            <td><code>&quot;jane.doe@email.com&quot;</code></td>
          </tr>
          <tr>
            <td><strong>password</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>Minimum length: 10 characters; sent as simple text</td>
            <td><code>&quot;myS3cur3P@ss!&quot;</code></td>
          </tr>
          <tr>
            <td>firstName</td>
            <td>string</td>
            <td>no</td>
            <td><em>(none)</em></td>
            <td><code>&quot;Jane&quot;</code></td>
          </tr>
          <tr>
            <td>lastName</td>
            <td>string</td>
            <td>no</td>
            <td><em>(none)</em></td>
            <td><code>&quot;Doe&quot;</code></td>
          </tr>
          <tr>
            <td>birthDate</td>
            <td>date</td>
            <td>no</td>
            <td>Date string format: <code>YYYY-MM-DD</code></td>
            <td><code>&quot;1983-06-18&quot;</code></td>
          </tr>
          <tr>
            <td>favoriteMovies</td>
            <td>array, ObjectId</td>
            <td>no</td>
            <td>Array of <code>movie ObjectIds</code> (strings)</td>
            <td>
              <code>[&quot;65561b8d...&quot;, &quot;65561a37...&quot;]</code>
            </td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong>2. <code>POST</code> Request Body</strong><br />
        <em>Expected JSON format for packaging the data:</em>
      </p>
      <pre><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane_Doe525&quot;</span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// Required</span>
    <span class="hljs-attr">&quot;password&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;myS3cur3P@ss!&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Required</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Required</span>
    <span class="hljs-attr">&quot;firstName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane&quot;</span>         <span class="hljs-comment">// Optional</span>
<span class="hljs-punctuation">}</span>
</code></pre>
      <br />
      <p>
        <strong>3. <code>POST</code> Request JavaScript</strong>
      </p>
      <pre><code class="language-js">
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/users&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> { 
        <span class="hljs-comment">// Checks if username already exists (a Mongoose validation check) </span>
        <span class="hljs-keyword">let</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Users</span>.<span class="hljs-title function_">findOne</span>({ <span class="hljs-attr">username</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">username</span> });

        <span class="hljs-keyword">if</span> (user) {
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">send</span>(req.<span class="hljs-property">body</span>.<span class="hljs-property">username</span> + <span class="hljs-string">&#x27;already exists&#x27;</span>);
        }
        <span class="hljs-comment">// Mongoose schema validation automatically checks for &#x27;name&#x27;, &#x27;password&#x27;, </span>
        <span class="hljs-comment">// and &#x27;email&#x27; as defined by &#x27;required: true&#x27; in the User Schema.  </span>
        <span class="hljs-keyword">let</span> newUser = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Users</span>.<span class="hljs-title function_">create</span>({
            <span class="hljs-attr">username</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">username</span>,
            <span class="hljs-attr">email</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">email</span>,
            <span class="hljs-attr">password</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">password</span>,
            <span class="hljs-attr">firstName</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">firstName</span>,
            <span class="hljs-attr">lastName</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">lastName</span>,
            <span class="hljs-attr">birthDate</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">birthDate</span>,
        <span class="hljs-comment">// favoriteMovies will default to [] if defined in the Schema</span>
            <span class="hljs-attr">favoriteMovies</span>: req.<span class="hljs-property">body</span>.<span class="hljs-property">favoriteMovies</span> 
        });
        
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">201</span>).<span class="hljs-title function_">json</span>(newUser);
    
    } <span class="hljs-keyword">catch</span> (error) { 
    <span class="hljs-comment">// Mongoose validation errors or other DB errors</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: &#x27;</span> + error);
    }
});

</code></pre>
      <br />
      <p>
        <strong>4. <code>POST</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>201 Created</code> Response</strong>
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Explains the fields and data types returned
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>_id</strong></td>
            <td>string</td>
            <td>
              The unique <strong>MongoDB ObjectId</strong> generated for the new
              User
            </td>
          </tr>
          <tr>
            <td><strong>username</strong></td>
            <td>string</td>
            <td>The username created</td>
          </tr>
          <tr>
            <td>favorite_movies</td>
            <td>array</td>
            <td>A list of ObjectIds; initialized as empty <code>[]</code></td>
          </tr>
          <tr>
            <td><em>(All other fields)</em></td>
            <td></td>
            <td>All other User document fields containing data</td>
          </tr>
          <tr>
            <td>_v</td>
            <td>number</td>
            <td>Internal Mongoose version key.</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>POST</code> Response JSON Example</strong><br />
        <em>A unique ID is automatically generated by MongoDB</em>
      </p>
      <pre><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;65561a37c9510166299d6d3d&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane_Doe525&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;favoriteMovies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;__v&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span> <span class="hljs-comment">// Mongoose version key</span>
<span class="hljs-punctuation">}</span>
</code></pre>
      <br />
      <p>
        <strong><code>400 Bad Request</code> Response JSON Example</strong>
      </p>
      <pre><code>Example: { message: &quot;Jane Doe already exists&quot; }
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code>POST : Add a Movie to "Favorite Movies"</code></span
          ></strong
        >
        <p>
          This endpoint adds a specific Movie ObjectId to a User's list of
          &quot;Favorite Movies&quot;.
        </p>
        <br />
        <p>
          <strong>Endpoint:</strong><code>/users/:username/movies/:movieId</code
          ><br />
          <strong>Example:</strong>
          /users/Jane_Doe525/movies/65561b8dc9510166299d6d3e<br />
          <strong>CRUD Operation:</strong> UPDATE (modifies the User
          document)<br />
          <strong>Authentification:</strong> Required
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        This defines what the client sends and the rules for each field.
        <strong>No Request Body is required</strong>
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>username</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>The unique username of the registered User</td>
            <td><code>&quot;Jane_Doe525&quot;</code></td>
          </tr>
          <tr>
            <td><strong>movieId</strong></td>
            <td>ObjectId (string)</td>
            <td>yes</td>
            <td>The <strong>MongoDB ObjectId</strong> of the Movie to add</td>
            <td><code>&quot;65561b8...&quot;</code></td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong>2. <code>POST</code> Request JavaScript</strong><br />
        This Mongoose Logic uses <code>findOneAndUpdate</code> method and the
        <code>$push</code> operator.
      </p>
      <pre><code class="language-js">
<span class="hljs-comment">// Use findOneAndUpdate with the $push operator</span>
app.<span class="hljs-title function_">post</span>(<span class="hljs-string">&#x27;/users/:username/movies/:movieId&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {   
        <span class="hljs-keyword">const</span> userName = req.<span class="hljs-property">params</span>.<span class="hljs-property">username</span>;
        <span class="hljs-keyword">let</span> movieId = req.<span class="hljs-property">params</span>.<span class="hljs-property">movieId</span>;
        
        movieId = <span class="hljs-keyword">new</span> mongoose.<span class="hljs-property">Types</span>.<span class="hljs-title class_">ObjectId</span>(movieId);
        
        <span class="hljs-keyword">let</span> updatedUser = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Users</span>.<span class="hljs-title function_">findOneAndUpdate</span>(
            { <span class="hljs-attr">username</span>: userName }, <span class="hljs-comment">// Find the user by their Username</span>
            { <span class="hljs-attr">$push</span>: { <span class="hljs-attr">favoriteMovies</span>: movieId } },
            { <span class="hljs-attr">new</span>: <span class="hljs-literal">true</span> } <span class="hljs-comment">// Forces the updated document to be returned</span>
        );

        <span class="hljs-keyword">if</span> (!updatedUser) {
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">`Error: User &quot;<span class="hljs-subst">${userName}</span>&quot; not found in database.`</span>);
        } 

        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">201</span>).<span class="hljs-title function_">json</span>(updatedUser); <span class="hljs-comment">// Return the full updated user object</span>
    
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error adding movie: &#x27;</span> + error);
    }
});

</code></pre>
      <br />
      <p>
        <strong>3. <code>POST</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>200 OK</code> Response</strong> The server returns the
        full updated User document, including the new Movie ID in the
        <code>favorite_movies</code> array.
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Explains the updated array
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>_id</strong></td>
            <td>string</td>
            <td>The unique <strong>MongoDB ObjectId</strong> for the User</td>
          </tr>
          <tr>
            <td><strong>favoriteMovies</strong></td>
            <td>array of string</td>
            <td>
              The complete array of <strong>movie ObjectIds</strong>, including
              the newly added Movie
            </td>
          </tr>
          <tr>
            <td><em>(All other fields)</em></td>
            <td></td>
            <td>All other User document fields</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>POST</code> Response JSON Example</strong>
      </p>
      <pre><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;65561a37c9510166299d6d3d&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane_Doe525&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane@example.com&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;favoriteMovies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">&quot;65561b8dc9510166299d6d3e&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Existing Movie ID</span>
        <span class="hljs-string">&quot;65561b8dc9510166299d6d3f&quot;</span>  <span class="hljs-comment">// Newly Added Movie ID</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;__v&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
<span class="hljs-punctuation">}</span>
</code></pre>
      <br />
      <p>
        <strong><code>404 Not Found</code> Response JSON Example</strong>
      </p>
      <pre><code>Example: { message: &quot;Error: User &quot;Jane.Doe&quot; not found in database.&quot; }
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code>GET : Get all movies</code></span
          ></strong
        >
        <p>
          This endpoint retrieves an array containing all Movie documents stored
          in the database. <br />
        </p>
        <p>
          <strong>Endpoint:</strong> <code>/movies</code><br />
          <strong>CRUD Operation:</strong> READ<br />
          <strong>Authentification:</strong> none
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        This endpoint takes no parameters and requires no request body.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><em>(none)</em></td>
            <td>N/A</td>
            <td>no</td>
            <td>N/A</td>
            <td><em>(none)</em></td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong>2. <code>GET</code> Request JavaScript</strong><br />
        This logic uses the Mongoose <code>Movies.find()</code> method.
      </p>
      <pre><code class="language-js">
<span class="hljs-comment">// Mongoose method to retrieve ALL documents from the `movies` collection</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/movies&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">let</span> movies = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Movies</span>.<span class="hljs-title function_">find</span>();
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>(movies);
    
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error retrieving Movies: &#x27;</span> + error);
    }
});
</code></pre>
      <br />
      <p>
        <strong>3. <code>GET</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>200 OK</code> Response</strong> The server returns an
        array of Movie documents.
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Explains the Movie document structure
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>_id</strong></td>
            <td>string</td>
            <td>
              The unique <strong>MongoDB ObjectId</strong> generated for each
              Movie document
            </td>
          </tr>
          <tr>
            <td><strong>title</strong></td>
            <td>string</td>
            <td>The title of the Movie</td>
          </tr>
          <tr>
            <td><strong>summary</strong></td>
            <td>string</td>
            <td>A summary of the Movie</td>
          </tr>
          <tr>
            <td><strong>genres</strong></td>
            <td>array</td>
            <td>
              A reference object containing <code>genreName</code> and
              <code>genreDescription</code>
            </td>
          </tr>
          <tr>
            <td><strong>cast</strong></td>
            <td>array</td>
            <td>
              A reference object containing <code>castName</code>,
              <code>castBio</code>, <code>birthDate</code>
            </td>
          </tr>
          <tr>
            <td><strong>directors</strong></td>
            <td>array</td>
            <td>
              A reference object containing <code>directorName</code>,
              <code>bio</code>, <code>birthDate</code>
            </td>
          </tr>
          <tr>
            <td><em>(All other fields)</em></td>
            <td></td>
            <td>All other Movie document fields</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>GET</code> Response JSON Example</strong>
      </p>
      <pre><code class="language-json">
<span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;65561b8dc9510166299d6d3e&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Movie One Title&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A concise summary of the first movie&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;genres&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;genreName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Comedy&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;genreDescription&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The Comedy film genre is designed to be humorous or amusing, intending to induce laughter. It usually features lighthearted plots and ends happily.&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;genreName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Family&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;genreDescription&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The Family film genre is aimed at audiences of all ages, often focusing on themes of childhood, home, and love.&quot;</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;cast&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;castName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Joe Talent&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;castBio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A brief actor bio&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1979-12-08&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>  
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;castName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Beth Smith&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;castBio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A brief actor bio&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1963-04-12&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;directors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;directorName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Peter Doe&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;bio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A brief director bio&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1973-11-09&quot;</span><span class="hljs-punctuation">,</span> 
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;releaseDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2022-01-25&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;imagePath&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;movietitle.png&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;featured&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span>/<span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;__v&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// ... more movie objects</span>
<span class="hljs-punctuation">]</span>
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code>GET : Get a single Movie by title</code></span
          ></strong
        >
        <p>
          This endpoint retrieves a single Movie document that matches the title
          provided in the URL path. <br />
        </p>
        <p>
          <strong>Endpoint:</strong> <code>/movies/:title</code><br />
          <strong>Example:</strong> /movies/Die%20Hard<br />
          <strong>CRUD Operation:</strong> READ<br />
          <strong>Authentification:</strong> none
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        The required parameter is passed via the URL path.
        <strong>No request body is required</strong>.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>title</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>
              The full, exact title of the Movie; URL-encoded for spaces
              <code>%20</code>
            </td>
            <td><code>Die%20Hard</code></td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong>2. <code>GET</code> Request JavaScript</strong><br />
        This logic uses the Mongoose <code>Movie.findOne()</code> method.
      </p>
      <pre><code class="language-js">
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/movies/:title&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; { 
    <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Mongoose finds one document where the &#x27;Title&#x27; field matches the parameter</span>
        <span class="hljs-keyword">let</span> movie = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Movies</span>.<span class="hljs-title function_">findOne</span>({ <span class="hljs-attr">title</span>: req.<span class="hljs-property">params</span>.<span class="hljs-property">title</span> });
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>(movie);

    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error retrieving Movie: &#x27;</span> + error);
    }
});
</code></pre>
      <br />
      <p>
        <strong>3. <code>GET</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>200 OK</code> Response Body</strong><br />
        The server returns the single matching Movie document.
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Details the specific fields returned
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>_id</strong></td>
            <td>string</td>
            <td>The unique <strong>MongoDB ObjectId</strong> for the Movie</td>
          </tr>
          <tr>
            <td><strong>title</strong></td>
            <td>string</td>
            <td>The title of the Movie (matches the request parameter)</td>
          </tr>
          <tr>
            <td><em>(All other fields)</em></td>
            <td></td>
            <td>All other Movie document fields</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>GET</code> Response JSON Example</strong>
      </p>
      <pre><code class="language-json">
<span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;65561b8dc9510166299d6d3e&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Movie One Title&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A concise summary of the first movie&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;genres&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;genreName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Comedy&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;genreDescription&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The Comedy film genre is designed to be humorous or amusing, intending to induce laughter. It usually features lighthearted plots and ends happily.&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;genreName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Family&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;genreDescription&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The Family film genre is aimed at audiences of all ages, often focusing on themes of childhood, home, and love.&quot;</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;cast&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;castName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Joe Talent&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;castBio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A brief actor bio&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1979-12-08&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>  
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;castName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Beth Smith&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;castBio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A brief actor bio&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1963-04-12&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;directors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;directorName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Peter Doe&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;bio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A brief biography of the director.&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1973-11-09&quot;</span><span class="hljs-punctuation">,</span> 
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;releaseDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2022-01-25&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;imagePath&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;movietitle.png&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;featured&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-keyword">true</span>/<span class="hljs-keyword">false</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;__v&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code>GET : Get Genre data by Genre name</code></span
          ></strong
        >
        <p>
          This endpoint finds the matching Genre name and returns only the
          embedded Genre object details. <br />
        </p>
        <p>
          <strong>Endpoint:</strong> <code>/genres/:genreName</code>.<br />
          <strong>Example:</strong> /genres/Animated<br />
          <strong>CRUD Operation:</strong> READ<br />
          <strong>Authentification:</strong> none
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        The required parameter is passed via the URL path. No request body is
        required.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>genreName</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>
              The full, exact name of the Genre; URL-encoded for spaces
              <code>%20</code>
            </td>
            <td><code>Animated</code></td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong>2. <code>GET</code> Request JavaScript</strong> This logic uses
        the Mongoose <code>Movies.find()</code> method to retrieve and isolate a
        Genre object that matches the <code>genreName</code>.
      </p>
      <pre><code class="language-js">
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/genres/:genreName&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; { 
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> genreName = req.<span class="hljs-property">params</span>.<span class="hljs-property">genreName</span>;
        
        <span class="hljs-comment">// 1. Find ONE movie document that contains the matching genre name in its &#x27;genres&#x27; array</span>
        <span class="hljs-keyword">let</span> movie = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Movies</span>.<span class="hljs-title function_">findOne</span>({ <span class="hljs-string">&#x27;genres.genreName&#x27;</span>: genreName });
        
        <span class="hljs-keyword">if</span> (!movie) {
            <span class="hljs-comment">// No movie document was found at all with this genre</span>
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">`Error: no data found in the database for this Genre: <span class="hljs-subst">${genreName}</span>`</span>);
        }

        <span class="hljs-comment">// 2. Search the &#x27;genres&#x27; array of the found movie document for the specific genre object</span>
        <span class="hljs-keyword">const</span> genreDetails = movie.<span class="hljs-property">genres</span>.<span class="hljs-title function_">find</span>(
            <span class="hljs-function"><span class="hljs-params">g</span> =&gt;</span> g.<span class="hljs-property">genreName</span> === genreName
        );

        <span class="hljs-keyword">if</span> (!genreDetails) {
            <span class="hljs-comment">// This check is technically redundant if the findOne worked, </span>
            <span class="hljs-comment">// but it serves as a good safeguard.</span>
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: Genre data could not be extracted from the database.&#x27;</span>);
        }

        <span class="hljs-comment">// 3. Respond with only the genre object (genreName and genreDescription)</span>
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>(genreDetails);    
    
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: &#x27;</span> + error.<span class="hljs-property">message</span>);
    }
});

</code></pre>
      <br />
      <p>
        <strong>3. <code>GET</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>200 OK</code> Response Body</strong><br />
        The server returns data about the specified Genre name .
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Standard specified fields and data types returned for an embedded Genre
        object.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>genreName</strong></td>
            <td>string</td>
            <td>The Genre name matching the query</td>
          </tr>
          <tr>
            <td><strong>genreDescription</strong></td>
            <td>string</td>
            <td>A concise description of the Genre</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>GET</code> Response JSON Example</strong>
      </p>
      <pre><code class="language-json">
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;genres&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;genreName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Comedy&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;genreDescription&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The Comedy film genre is designed to be humorous or amusing, intending to induce laughter. It usually features lighthearted plots and ends happily.&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>

<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <p>
        <strong><code>404 Not Found</code> Response JSON Example</strong>
      </p>
      <pre><code>Example: { message: &quot;Error: no Movies found in the database matching the Genre: Thriller.&quot; }
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code>GET : Get a Director by name</code></span
          ></strong
        >
        <p>
          This endpoint finds a Movie directed by the specified Director and
          returns only the embedded Director object details. <br />
        </p>
        <p>
          <strong>Endpoint:</strong> <code>/directors/:directorName</code><br />
          <strong>Example:</strong> /directors/Rob%20Reiner<br />
          <strong>CRUD Operation:</strong> READ<br />
          <strong>Authentification:</strong> none
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        The required parameter is passed via the URL path. No request body is
        required.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>directorName</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>
              The full, exact name of the Director; URL-encoded for spaces
              <code>%20</code>
            </td>
            <td><code>Rob%20Reiner</code></td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>GET</code> Request JavaScript</strong><br />
        This logic uses the <code>Movies.findOne</code> method and the
        <code>directorDetails</code> to return the <code>directors</code> field.
      </p>
      <pre><code class="language-js">
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/directors/:directorName&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; { 
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> directorName = req.<span class="hljs-property">params</span>.<span class="hljs-property">directorName</span>;

        <span class="hljs-keyword">let</span> movie = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Movies</span>.<span class="hljs-title function_">findOne</span>({ <span class="hljs-string">&#x27;directors.director_name&#x27;</span>: directorName });
               
        <span class="hljs-keyword">if</span> (!movie) {
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">`Error: no data in the database for this Director: <span class="hljs-subst">${directorName}</span>`</span>);
        }
        
        <span class="hljs-keyword">const</span> directorDetails = movie.<span class="hljs-property">directors</span>.<span class="hljs-title function_">find</span>(
            <span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> d.<span class="hljs-property">directorName</span> === directorName
        );

        <span class="hljs-keyword">if</span> (!directorDetails) {
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">`Error: Director data could not be extracted from the database.`</span>);
        }

        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>(directorDetails);    
    
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: &#x27;</span> + error.<span class="hljs-property">message</span>);
    }
});
</code></pre>
      <br />
      <p>
        <strong>3. <code>GET</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>200 OK</code> Response Body</strong><br />
        The server returns the specific Director object.
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Explains the fields and data types returned
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>directorName</strong></td>
            <td>string</td>
            <td>The Director's full name</td>
          </tr>
          <tr>
            <td><strong>bio</strong></td>
            <td>string</td>
            <td>A brief biography of the Director</td>
          </tr>
          <tr>
            <td><strong>birthDate</strong></td>
            <td>date</td>
            <td>The Director's date of birth</td>
          </tr>
          <tr>
            <td><strong>deathDate</strong></td>
            <td>date</td>
            <td>The Director's date of death, or field is absent</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>GET</code> Response JSON Example</strong>
      </p>
      <pre><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;directorName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Peter Doe&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;bio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;A brief biography of the director.&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1973-11-09&quot;</span><span class="hljs-punctuation">,</span> 
<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <p>
        <strong><code>404 Not Found</code> Response JSON Example</strong>
      </p>
      <p>for <code>Movies.findOne()</code> query</p>
      <pre><code>Example: { message: &quot;Error: no data in the database for this Director: Muhammad Ali.&quot; }
</code></pre>
      <br />
      <p>for <code>movie.directors.find()</code> query</p>
      <pre><code>Example: { message: &quot;Error: Director data could not be extracted from the database.&quot; }
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code>PUT : Update a User's account</code></span
          ></strong
        >
        <p>
          This endpoint allows an existing User to update their account
          information. <br />
        </p>
        <p>
          <strong>Endpoint:</strong> <code>/users/:username</code><br />
          <strong>Example:</strong> /users/Jane_Doe525<br />
          <strong>CRUD Operation:</strong> UPDATE<br />
          <strong>Authentification:</strong> Required
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        The parameters to find the User are passed via the URL path. Only the
        <code>username</code> field is required.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>username</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>
              The current username of the registered User whose data is being
              updated
            </td>
            <td><code>&quot;Jane_Doe525&quot;</code></td>
          </tr>
          <tr>
            <td>email</td>
            <td>string</td>
            <td>no</td>
            <td>Unique; must be valid email format</td>
            <td><code>&quot;jane.doe@email.com&quot;</code></td>
          </tr>
          <tr>
            <td>password</td>
            <td>string</td>
            <td>no</td>
            <td>Minimum length: 10 characters; sent as simple text</td>
            <td><code>&quot;myS3cur3P@ss!&quot;</code></td>
          </tr>
          <tr>
            <td>firstName</td>
            <td>string</td>
            <td>no</td>
            <td><em>(none)</em></td>
            <td><code>&quot;Jane&quot;</code></td>
          </tr>
          <tr>
            <td>lastName</td>
            <td>string</td>
            <td>no</td>
            <td><em>(none)</em></td>
            <td><code>&quot;Doe&quot;</code></td>
          </tr>
          <tr>
            <td>birthDate</td>
            <td>date</td>
            <td>no</td>
            <td>Date string format: <code>YYYY-MM-DD</code></td>
            <td><code>&quot;1983-06-18&quot;</code></td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong>2. <code>PUT</code> Request Body</strong><br />
        The body contains the fields to be updated. Since this is an update, all
        fields are optional to send, but they must adhere to the schema's format
        and constraints if present.
      </p>
      <pre><code class="language-json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;janeDoe525&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Updated text in &quot;username&quot; string</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;animalL0ver@yahoo.com&quot;</span> <span class="hljs-comment">// Updated text in &quot;email&quot; string</span>
<span class="hljs-punctuation">}</span>
</code></pre>
      <br />
      <p>
        <strong>3. <code>PUT</code> Request JavaScript</strong><br />
        This logic uses the Mongoose
        <code>Users.findOneAndUpdate()</code> method and the
        <code>$set</code> operator.
      </p>
      <pre><code class="language-js">
app.<span class="hljs-title function_">put</span>(<span class="hljs-string">&#x27;/users/:username&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">let</span> oldUsername = req.<span class="hljs-property">params</span>.<span class="hljs-property">username</span>;
        <span class="hljs-keyword">const</span> body = req.<span class="hljs-property">body</span>;
        <span class="hljs-keyword">const</span> updates = {};
        <span class="hljs-keyword">const</span> updateableFields = [ <span class="hljs-string">&#x27;username&#x27;</span>, <span class="hljs-string">&#x27;email&#x27;</span>, <span class="hljs-string">&#x27;password&#x27;</span>, <span class="hljs-string">&#x27;firstName&#x27;</span>, <span class="hljs-string">&#x27;lastName&#x27;</span>, <span class="hljs-string">&#x27;birthDate&#x27;</span> ];
        
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> field <span class="hljs-keyword">of</span> updateableFields) {
            <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(body, field) &amp;&amp; body[field] !== <span class="hljs-literal">null</span>) {
                updates[field] = body[field];    
            }
        }
        
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(updates).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: No valid fields provided to update.&#x27;</span>);
        }

        <span class="hljs-keyword">let</span> updatedUser = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Users</span>.<span class="hljs-title function_">findOneAndUpdate</span>(
            { <span class="hljs-attr">username</span>: oldUsername },
            <span class="hljs-comment">// Use $set to update only the fields provided in updates</span>
            { <span class="hljs-attr">$set</span>: updates },
            <span class="hljs-comment">// options: new=true returns the updated document</span>
            { <span class="hljs-attr">new</span>: <span class="hljs-literal">true</span> }
        );

        <span class="hljs-keyword">if</span> (!updatedUser) {
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: User not found in database&#x27;</span>);
        }

        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>(updatedUser);

    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: &#x27;</span> + error);
    }
});
</code></pre>
      <br />
      <p>
        <strong>4. <code>PUT</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>200 OK</code> Response Body</strong><br />
        The server returns the full updated User document.
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Details the specific fields returned
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>_id</strong></td>
            <td>string</td>
            <td>The unique <strong>MongoDB ObjectId</strong> for the User</td>
          </tr>
          <tr>
            <td><strong>username</strong></td>
            <td>string</td>
            <td>The updated username</td>
          </tr>
          <tr>
            <td><strong>email</strong></td>
            <td>string</td>
            <td>The updated email</td>
          </tr>
          <tr>
            <td><em>(All other fields)</em></td>
            <td></td>
            <td>
              All other User document fields, including those that are updated
            </td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>PUT</code> Response JSON Example</strong>
      </p>
      <pre><code class="language-json">
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;65561a37c9510166299d6d3d&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;janeDoe525&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Updated field</span>
    <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;animalL0ver@yahoo.com&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Updated field</span>
    <span class="hljs-attr">&quot;firstName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane&quot;</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;favoriteMovies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">&quot;65561b8dc9510166299d6d3e&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">&quot;65561b8dc9510166299d6d3f&quot;</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <p>
        <strong><code>400 Bad Request</code> Response JSON Example</strong>
      </p>
      <pre><code>Example: { message: &quot;Error: No valid fields provided to update.&quot; }
</code></pre>
      <br />
      <p>
        <strong><code>404 Not Found</code> Response JSON Example</strong>
      </p>
      <pre><code>Example: { message: &quot;Error: User not found in database.&quot; }
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code>DELETE : Remove a User from the database</code></span
          ></strong
        >
        <p>
          This endpoint allows a registered User to delete their account. <br />
        </p>
        <p>
          <strong>Endpoint:</strong> <code>/users/:username</code><br />
          <strong>Example:</strong> /users/Jane_Doe525<br />
          <strong>CRUD Operation:</strong> DELETE<br />
          <strong>Authentification:</strong> Required
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        This defines what the client sends and the rules for each field.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>username</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>The unique username of the registered User to be deleted</td>
            <td><code>&quot;Jane_Doe525&quot;</code></td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong>2. <code>DELETE</code> Request JavaScript</strong><br />
        This logic uses the Mongoose
        <code>Users.findOneAndDelete()</code> method to permanently remove a
        User document from the <code>users</code> collection.
      </p>
      <pre><code class="language-js">
app.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&#x27;/users/:username&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// Mongoose method to find and remove one document based on the query</span>
        <span class="hljs-keyword">let</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Users</span>.<span class="hljs-title function_">findOneAndDelete</span>({ <span class="hljs-attr">username</span>: req.<span class="hljs-property">params</span>.<span class="hljs-property">username</span> });        
        
        <span class="hljs-keyword">if</span> (!user) {
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(req.<span class="hljs-property">params</span>.<span class="hljs-property">username</span> + <span class="hljs-string">&#x27; was not found in database to delete.&#x27;</span>);
        }
        <span class="hljs-comment">// If user is returned, deletion was successful</span>
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">send</span>(req.<span class="hljs-property">params</span>.<span class="hljs-property">username</span> + <span class="hljs-string">&#x27; was deleted from database.&#x27;</span>);

    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: &#x27;</span> + error);
    }
});
</code></pre>
      <br />
      <p>
        <strong>3. <code>DELETE</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>200 OK</code> Response Body</strong><br />
        The server returns a text-based confirmation message since the resource
        (the User document) is no longer available.
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Details the specific output
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>message</strong></td>
            <td>string</td>
            <td>A confirmation message indicating the User was deleted</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>DELETE</code> Response JSON Example</strong>
      </p>
      <pre><code>Example: { message: &quot;Jane_Doe525 was deleted from database.&quot; }
</code></pre>
      <br />
      <p>
        <strong><code>404 Not Found</code> Response JSON Example</strong>
      </p>
      <pre><code>Example: { message: &quot;Jane_Doe524 was not found in database to delete.&quot; }
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.25em"
            ><code
              >DELETE :Remove a Movie from User's "Favorite Movies"</code
            ></span
          ></strong
        >
        <p>
          This endpoint removes a specific Movie ObjectId from a User's array of
          <code>favorite_movies</code>. <br />
        </p>
        <p>
          <strong>Endpoint:</strong>
          <code>/users/:username/movies/:movieId</code><br />
          <strong>Example:</strong>
          /users/Jane_Doe525/movies/65561b8dc9510166299d6d3e<br />
          <strong>CRUD Operation:</strong> UPDATE (modifies the Users
          document)<br />
          <strong>Authentification:</strong> Required
        </p>
      </summary>
      <br />
      <p>
        <strong>1. Request Parameters Table (Input Schema)</strong><br />
        The required data is passed via URL parameters (path variables).
        <strong>No Request Body is required</strong>.
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Required</th>
            <th>Constraints/Format</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>username</strong></td>
            <td>string</td>
            <td>yes</td>
            <td>The unique username of the registered User</td>
            <td><code>&quot;Jane_Doe525&quot;</code></td>
          </tr>
          <tr>
            <td><strong>movieId</strong></td>
            <td>string (ObjectId)</td>
            <td>yes</td>
            <td>
              The <strong>MongoDB ObjectId</strong> of the Movie to remove
            </td>
            <td><code>&quot;65561b8dc9510166299d6d3e&quot;</code></td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong>2. <code>DELETE</code> Request JavaScript</strong><br />
        This logic uses the Mongoose
        <code>Users.findOneAndUpdate()</code> method and the MongoDB
        <code>$pull</code> operator to remove a specific
        <strong>Movie ObjectId</strong> from the User's
        <code>favoriteMovies</code> array.
      </p>
      <pre><code class="language-js">
app.<span class="hljs-title function_">delete</span>(<span class="hljs-string">&#x27;/users/:username/movies/:movieId&#x27;</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> userName = req.<span class="hljs-property">params</span>.<span class="hljs-property">username</span>;
        <span class="hljs-keyword">const</span> movieId = req.<span class="hljs-property">params</span>.<span class="hljs-property">movieId</span>;
        
        <span class="hljs-keyword">let</span> updatedUser = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Users</span>.<span class="hljs-title function_">findOneAndUpdate</span>(
            { <span class="hljs-attr">username</span>: userName },
            <span class="hljs-comment">// Use $pull operator to remove the specified element from the array field</span>
            <span class="hljs-comment">// Remove the movieId from the array</span>
            { <span class="hljs-attr">$pull</span>: { <span class="hljs-attr">favorite_movies</span>: movieId } },
            <span class="hljs-comment">// Return the updated document</span>
            { <span class="hljs-attr">new</span>: <span class="hljs-literal">true</span> }
        );

        <span class="hljs-keyword">if</span> (!updatedUser) {
            <span class="hljs-comment">// This handles if the username was not found</span>
            <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">`Error: User <span class="hljs-subst">${userName}</span> not found in database.`</span>);
        }   
        <span class="hljs-comment">// Success: return the updated user object</span>
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">`Movie ID &quot;<span class="hljs-subst">${movieId}</span>&quot; was removed from <span class="hljs-subst">${userName}</span>&#x27;s &#x27;Favorite Movies&#x27; array.`</span>);

    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
        res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;Error: &#x27;</span> + error);
    }
});
</code></pre>
      <br />
      <p>
        <strong>3. <code>DELETE</code> Response Status Code and Output</strong>
      </p>
      <p>
        <strong><code>200 OK</code> Response Body</strong><br />
        The server returns the full updated User document, now missing the
        specified Movie ID in the <code>favoriteMovies</code> array.
      </p>
      <br />
      <p>
        <strong>Response Body Fields Table</strong><br />
        Details on the updated <code>favoriteMovies</code> array
      </p>
      <table>
        <thead>
          <tr>
            <th>Key Field Name</th>
            <th>Type</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>_id</strong></td>
            <td>string</td>
            <td>The unique <strong>MongoDB ObjectId</strong> for the user</td>
          </tr>
          <tr>
            <td><strong>favoriteMovies</strong></td>
            <td>array of string</td>
            <td>
              The complete array of <strong>movie ObjectIds</strong>, with the
              specified Movie successfully removed
            </td>
          </tr>
          <tr>
            <td><em>(All other fields)</em></td>
            <td></td>
            <td>All other User document fields</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <p>
        <strong><code>DELETE</code> Response JSON Example</strong>
      </p>
      <pre><code class="language-json">    Example<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> message<span class="hljs-punctuation">:</span> &#x27;Movie ID <span class="hljs-string">&quot;65561b8dc9510166299d6d3e&quot;</span> was removed from Jane_Doe525&#x27;s <span class="hljs-string">&quot;Favorite Movies&quot;</span> array.&#x27; <span class="hljs-punctuation">}</span>
</code></pre>
      <br />
      <p>
        <strong><code>404 Not Found</code> Response JSON Example</strong>
      </p>
      <pre><code class="language-json">    Example<span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> message<span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Error: User Jane_Doe524 not found in database.&quot;</span> <span class="hljs-punctuation">}</span>
</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <h2 id="-global-http-responses">
      üåè <strong>GLOBAL HTTP RESPONSES</strong>
    </h2>
    <hr />
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.2em"
            >HTTP Status Codes Overview</span
          ></strong
        >
        <p>
          The HTTP status codes provide high-level feedback about the outcome of
          client requests, as well as helping in debugging and handling errors
          successfully. All responses from the myFlix API will contain a status
          code.
        </p>
      </summary>
      <br />
      <p><strong>HTTP Status Code Table</strong></p>
      <table>
        <thead>
          <tr>
            <th>Status Code</th>
            <th>Class</th>
            <th>Description</th>
            <th>Usage in myFlix</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>200 OK</code></td>
            <td>Success</td>
            <td>Request was successful</td>
            <td>
              Used for GET (read), PUT (update), and successful DELETE (removing
              a favorite movie)
            </td>
          </tr>
          <tr>
            <td><code>201 Created</code></td>
            <td>Success</td>
            <td>New resource was successfully created</td>
            <td>Used for <code>POST</code> (new user registration)</td>
          </tr>
          <tr>
            <td><code>400 Bad Request</code></td>
            <td>Client Error</td>
            <td>
              The server does not understand the request due to a client-side
              error (e.g., failed validation)
            </td>
            <td>
              Returned if a username is already taken or if required fields are
              missing
            </td>
          </tr>
          <tr>
            <td><code>404 Not Found</code></td>
            <td>Client Error</td>
            <td>The requested resource was not found</td>
            <td>Returned if a user or movie ID/title does not exist</td>
          </tr>
          <tr>
            <td><code>500 Internal Server Error</code></td>
            <td>Server Error</td>
            <td>
              A generic error indicating a server-side failure (e.g., database
              connection failure)
            </td>
            <td>Should always be included as a fallback error</td>
          </tr>
          <tr>
            <td><br /></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
      <h3 id="Ô∏è-example-standard-error-format">
        ‚ö†Ô∏è <strong>Example Standard Error Format:</strong>
      </h3>
      <pre><code class="language-json">
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">&quot;error_type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ValidationFailed&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Specific code for machine readability</span>
    <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Username already exists. Please choose another.&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// Readable description</span>
    <span class="hljs-attr">&quot;details&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;field&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;username&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;constraint&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;unique&quot;</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <h3 id="-global-json-schema-definitions">
      ü™ú <strong>Global JSON Schema Definitions</strong>
    </h3>
    <p>
      The following JSON Schemas define the structure of data sent to and
      received from the myFlix API. These models are derived from the Mongoose
      Schemas used to define the users and movies MongoDB collections.
    </p>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.2em"
            >1. User Document Schema (Collection: users)</span
          ></strong
        >
        <br />
        This defines the structure of a complete User resource.
      </summary>
      <br />
      <p><strong>Example: User Document Schema (MongoDB)</strong></p>
      <pre><code class="language-json">
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;User&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;object&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Represents a user account.&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>      
            <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The unique MongoDB ObjectId for the user.&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;65561a37c9510166299d6d3d&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;username&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Unique username (min 6 characters).&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Jane_Doe525&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;email&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;format&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;email&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Unique, validated email address.&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;jane.doe@email.com&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;firstName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;lastName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;format&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;date&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Use YYYY-MM-DD for date string format&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1983-10-05&quot;</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;favoriteMovies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;array&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;List of ObjectIds referencing Favorite Movies.&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;items&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;65561b8dc9510166299d6d3e&quot;</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;__v&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integer&quot;</span>
        <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;required&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">&quot;_id&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// automatically generated by MongoDB</span>
            <span class="hljs-string">&quot;username&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-string">&quot;email&quot;</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.2em"
            >2. Movie Document Schema (Collection: movies)</span
          ></strong
        >
        <br />
        This defines the structure of a complete Movie resource.
        <br />
        <blockquote>
          <p>
            ‚ùóÔ∏è <strong>Note:</strong> The <code>cast</code>,
            <code>directors</code>, and <code>genres</code> fields reference the
            sub-schemas defined below, demonstrating the embedded nature of the
            data.
          </p>
        </blockquote>
      </summary>
      <br />
      <p><strong>Example: Movie Document Schema (MongoDB)</strong></p>
      <pre><code class="language-json">
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;Movie&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;object&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Represents a movie document, including all embedded cast and genre data.&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;65561b8dc9510166299d6d3e&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;The unique MongoDB ObjectId for the movie.&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;title&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;summary&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            
            <span class="hljs-comment">// --- Embedded Schemas Referenced Below ---</span>
            <span class="hljs-attr">&quot;genres&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;array&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;List of genres (at least one required).&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;$ref&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#/components/schemas/Genre&quot;</span> <span class="hljs-comment">// References the sub-schema below</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;cast&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;array&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;List of actors (at least one required).&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;$ref&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#/components/schemas/Cast&quot;</span> <span class="hljs-comment">// References the sub-schema below</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;directors&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;array&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;List of directors (at least one required).&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;$ref&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;#/components/schemas/Director&quot;</span> <span class="hljs-comment">// References the sub-schema below</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-comment">// --- End of Embedded Schemas Referenced Above ---</span>
            
            <span class="hljs-attr">&quot;releaseDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;format&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;date&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Use YYYY-MM-DD for date string format&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1983-10-05&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;imagePath&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;example&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;standbyme.png&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;featured&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;boolean&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;__v&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;integer&quot;</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;required&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">&quot;_id&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-string">&quot;title&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-string">&quot;summary&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-string">&quot;genres&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-string">&quot;cast&quot;</span><span class="hljs-punctuation">,</span>
            <span class="hljs-string">&quot;directors&quot;</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <hr />
    </details>
    <h3 id="-3-embedded-sub-schemas-cast-director-genre">
      ü™ú <strong>3. Embedded Sub-Schemas (Cast, Director, Genre)</strong>
    </h3>
    <p>
      These schemas define the structure of the objects nested within the Movie
      document.
    </p>
    <br />
    <details>
      <summary>
        <strong><span style="font-size: 1.2em">Genre Sub-Schema</span></strong>
        <br />
      </summary>
      <p><strong>Example: Genre Sub-Schema (MongoDB)</strong></p>
      <pre><code class="language-json">
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;Genre&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;object&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Structure for Genre objects embedded in Movie documents.&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;genreName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;genreDescription&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;required&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">&quot;genreName&quot;</span><span class="hljs-punctuation">,</span> 
            <span class="hljs-string">&quot;genreDescription&quot;</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong><span style="font-size: 1.2em">Cast Sub-Schema</span></strong>
      </summary>
      <br />
      <p><strong>Example: Cast Sub-Schema (MongoDB)</strong></p>
      <pre><code class="language-json">
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;Cast&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;object&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Structure for Cast objects embedded in Movie documents.&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;castName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;castBio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Birthdate (YYYY or YYYY-MM-DD format).&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;deathDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;format&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;date&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Death date (or field absent).&quot;</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;required&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">&quot;castName&quot;</span><span class="hljs-punctuation">,</span> 
            <span class="hljs-string">&quot;birthDate&quot;</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <details>
      <summary>
        <strong
          ><span style="font-size: 1.2em">Director Sub-Schema</span></strong
        >
      </summary>
      <br />
      <p><strong>Example: Director Sub-Schema (MongoDB)</strong></p>
      <pre><code class="language-json">
<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">&quot;Director&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;object&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Structure for Director objects embedded in Movie documents.&quot;</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;properties&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">&quot;directorName&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;bio&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;birthDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Birthdate (YYYY or YYYY-MM-DD format).&quot;</span>
            <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">&quot;deathDate&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
                <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;string&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;format&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;date&quot;</span><span class="hljs-punctuation">,</span>
                <span class="hljs-attr">&quot;description&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Death date (or field absent).&quot;</span>
            <span class="hljs-punctuation">}</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">&quot;required&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">&quot;directorName&quot;</span><span class="hljs-punctuation">,</span> 
            <span class="hljs-string">&quot;birthDate&quot;</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

</code></pre>
      <br />
      <hr />
    </details>
    <br />
    <script
      async
      src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"
    ></script>
  </body>
</html>
